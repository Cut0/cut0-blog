# cut0-blog

## 概要

なんとなく自分のブログサイト欲しくなったのでつくりました。

## 環境

- node と yarn が使えれば問題ないと思います。

## 使用方法

詳しくは package.json を参照してください。

- `yarn dev` : Next.js を開発モードで起動します。
- `yarn build` : 本番用にビルドします。
- `yarn lint` : eslint と prettier の lint を走らせます。
- `yarn format` : eslint と prettier の format を走らせます。
- `yarn test` : Jest によるテストを実行します。開発では各ビジネスロジックに関するテストを書く予定です。

## 使用ライブラリ

- Next.js : SSG や Vercel との相性を考えて採用しました。画像の最適化という点で Gatsby.js を採用しようと考えましたが、今回は下記理由から Next.js を採用しました。
  - Gatsby.js の shadowing により、コードがブラックボックス化することを防ぐため(shadowing 自体は良い機能だと思いますが、今回はデザインも１から設計するため、あまり効果的でないと感じました。)
  - Next.js がシンプルなフレームワークであるから。(SSR などを除き基本的に Gatsby.js は Next.js が行っていることはできますが、どの機能も今回のケースで絶対に必要なものではないため、よりシンプルな Next.js を採用しました。)
- TypeScript : 可能な限り型安全に開発したいので採用しました。
- Vanilla Extract : 正直、使ってみたいから採用しました。採用することで以下の利点・欠点があると考えています。
  - 利点
    - ビルド時に CSS が生成されるため、CSS in JS よりパフォーマンスに期待ができる。
    - `*.css.ts`にコードを書くため、比較的型安全に CSS を記載できる。
    - 移行が比較的簡単(tailwind のようなライブラリ特有の記法が少く、生の CSS に近しいため他のライブラリに移行する際に楽だと感じました。)
  - 欠点
    - (好みであるが)`*.css.ts`にファイルが分割されるため、コンポーネント内にスタイルが書けない。
    - 最終的に className にスタイルを入れることになるため、的確な命名が必要。(この辺は Vanilla Extract の欠点というより CSS のつらみかもしれない)
- SWR : サーバーからのレスポンスをステートとして管理し、キャッスとして保持できるため採用しました。(わざわざ Redux とか Recoil を使いたくないため)
- MSW : HTTP の通信をモックするのに採用しました。テストコードで役に立つといいなと思います。
- microcms-js-sdk : microcms でブログ投稿を管理しているため採用しました。一通り内部のコードを読みましたが、非常にシンプルで使いやすそうです。

## CI/CD

- GitHub Actions : master マージ時に lint や test を行ってもらいます。
- Vercel : とにかく簡単にデプロイできる上に、プレビュー用のリンクも生成してもらえるため採用しました。

## 今後の展望

- モノレポ運用に変更し、このレポジトリを api-client と app に分割するかもしれません。
- このプロジェクトが肥大化した際には StoryBook を導入しようと考えています。
- Vanilla Extract を StyleX に置き換えるかもしれません。まだ、リリースされていないのでなんとも言えませんが
